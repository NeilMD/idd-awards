document.querySelectorAll(".filter-btn").forEach(e=>{console.log(`button ${e}`),e.addEventListener("click",function(){const t=this.getAttribute("data-filter");document.querySelectorAll(".tab-content").forEach(n=>{n.classList.remove("active-section")}),document.getElementById(t).classList.add("active-section")})});const d=document.getElementById("submission-form"),m=document.getElementById("memory-image"),u=document.getElementById("image-preview"),g=document.getElementById("preview-img"),B=document.getElementById("remove-image"),S=document.querySelector(".gallery-grid");document.querySelectorAll(".filter-btn");const r=document.getElementById("memory-modal"),L=document.getElementById("modal-image"),w=document.getElementById("modal-title"),q=document.getElementById("modal-submitter"),k=document.getElementById("modal-description"),A=document.querySelector(".close-modal"),c=document.getElementById("submit-memory");function D(){C()}function C(){m.addEventListener("change",F),B.addEventListener("click",y),d.addEventListener("submit",M),A.addEventListener("click",()=>{r.style.display="none"}),window.addEventListener("click",e=>{e.target===r&&(r.style.display="none")})}function F(e){const t=e.target.files[0];if(t){const n=new FileReader;n.onload=function(i){if(e.target.files[0].size>2097152){alert("File should be less than 2mb."),e.target.value="";return}else g.src=i.target.result,u.style.display="block"},n.readAsDataURL(t)}}function y(){m.value="",g.src="#",u.style.display="none"}function M(e){c.classList.add("button-disabled"),console.log("handleSubmission"),e.preventDefault();const t=document.getElementById("submitter-name").value,n=document.getElementById("memory-title").value,i=document.getElementById("memory-description").value,a=document.getElementById("memory-image").files[0];if(!a){alert("Please select an image to upload");return}const p=this.getAttribute("data-attr-submit"),E=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),s=new FileReader;s.onloadend=function(f){const v=f.target.result,I={id:Date.now(),name:t,title:n,description:i,imageUrl:v,timestamp:new Date().getTime()},l=new FormData;l.append("name",t),l.append("design_title",n),l.append("design_description",i),l.append("image",a),fetch(p,{method:"POST",headers:{"X-CSRF-TOKEN":E},body:l}).then(o=>o.json()).then(o=>{if(!o.success)console.error("Error:",error),alert("Error: occured Submitting Design");else{d.reset(),y();const h=U(I);S.insertAdjacentElement("afterbegin",h),c.classList.remove("button-disabled"),alert("Your design has been added to the time capsule!")}}).catch(o=>{console.error("Error:",o),alert("Error: occured Submitting Design")})},s.readAsDataURL(a)}function U(e){const t=document.createElement("div");return t.className="gallery-item",t.dataset.id=e.id,t.innerHTML=`
        <div class="gallery-image-container">
            <img src="${e.imageUrl}" alt="${e.title}" class="gallery-image">
        </div>
        <div class="gallery-info">
            <h3 class="gallery-title">${e.title}</h3>
            <p class="gallery-submitter">By ${e.name}</p>
            <p class="gallery-description">${e.description}</p>
        </div>
    `,t.addEventListener("click",()=>{b(e)}),t}function b(e){L.src=e.imageUrl,w.textContent=e.title,q.textContent=`Submitted by ${e.name}`,k.textContent=e.description,r.style.display="block"}D();const $=document.querySelectorAll(".gallery-item");$.forEach(e=>{e.addEventListener("click",t=>{let n={imageUrl:e.querySelector(".gallery-image").src,title:e.querySelector(".gallery-title").textContent,name:e.querySelector(".gallery-submitter").textContent.substring(3),description:e.querySelector(".gallery-description").textContent};b(n)})});
