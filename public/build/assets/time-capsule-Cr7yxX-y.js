const c=document.getElementById("submission-form"),g=document.getElementById("memory-image"),u=document.getElementById("image-preview"),y=document.getElementById("preview-img"),I=document.getElementById("remove-image"),r=document.getElementById("gallery-grid"),m=document.querySelectorAll(".filter-btn"),a=document.getElementById("memory-modal"),B=document.getElementById("modal-image"),L=document.getElementById("modal-title"),M=document.getElementById("modal-submitter"),b=document.getElementById("modal-description"),h=document.querySelector(".close-modal");let i=[];function w(){const e=localStorage.getItem("igniteMemories");e?i=JSON.parse(e):(i=[...sampleMemories],localStorage.setItem("igniteMemories",JSON.stringify(i))),s("all"),S()}function S(){g.addEventListener("change",k),I.addEventListener("click",f),c.addEventListener("submit",D),m.forEach(e=>{e.addEventListener("click",()=>{m.forEach(t=>t.classList.remove("active")),e.classList.add("active"),s(e.dataset.filter)})}),h.addEventListener("click",()=>{a.style.display="none"}),window.addEventListener("click",e=>{e.target===a&&(a.style.display="none")})}function k(e){const t=e.target.files[0];if(t){const n=new FileReader;n.onload=function(l){y.src=l.target.result,u.style.display="block"},n.readAsDataURL(t)}}function f(){g.value="",y.src="#",u.style.display="none"}function D(e){e.preventDefault();const t=document.getElementById("submitter-name").value,n=document.getElementById("memory-title").value,l=document.getElementById("memory-description").value,o=document.getElementById("memory-image").files[0];if(!o){alert("Please select an image to upload");return}const d=new FileReader;d.onload=function(p){const v=p.target.result,E={id:Date.now(),name:t,title:n,description:l,imageUrl:v,type:"latest",timestamp:new Date().getTime()};i.unshift(E),localStorage.setItem("igniteMemories",JSON.stringify(i)),c.reset(),f(),s("all"),alert("Your design has been added to the time capsule!")},d.readAsDataURL(o)}function s(e){r.innerHTML="";let t=[...i];e==="latest"?t=i.filter(n=>n.type==="latest"):e==="featured"&&(t=i.filter(n=>n.type==="featured")),t.forEach(n=>{const l=$(n);r.appendChild(l)})}function $(e){const t=document.createElement("div");return t.className="gallery-item",t.dataset.id=e.id,t.innerHTML=`
        <div class="gallery-image-container">
            <img src="${e.imageUrl}" alt="${e.title}" class="gallery-image">
        </div>
        <div class="gallery-info">
            <h3 class="gallery-title">${e.title}</h3>
            <p class="gallery-submitter">By ${e.name}</p>
            <p class="gallery-description">${e.description}</p>
        </div>
    `,t.addEventListener("click",()=>{C(e)}),t}function C(e){B.src=e.imageUrl,L.textContent=e.title,M.textContent=`Submitted by ${e.name}`,b.textContent=e.description,a.style.display="block"}document.addEventListener("DOMContentLoaded",w);
